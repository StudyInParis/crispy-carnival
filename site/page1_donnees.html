<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>geoapplide - données</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body class="left-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index.html">geoapplide</a></h1>
								<span>projet</span>
							</div>

							<!-- Nav -->
								<nav id="nav">
									<ul>
										<li class="current"><a href="index.html">Bienvenue !</a></li>
										<li>
											<a href="page1_donnees.html">Données</a>
											<ul>
												<li><a href="#">Lorem ipsum dolor</a></li>
												<li><a href="#">Magna phasellus</a></li>
												<li><a href="#">Phasellus consequat</a></li>
												<li><a href="#">Veroeros feugiat</a></li>
											</ul>
										</li>
										<li><a href="page2_graphes.html">Graphes</a></li>
										<li><a href="page3_visu.html">Visualisation</a></li>
										<li><a href="page4_carte.html">Carte</a></li>
									</ul>
								</nav>

					</header>
				</div>

			<!-- Main -->
				<div id="main-wrapper">
					<div class="container">
						<div class="row 200%">
							<div class="4u 12u$(medium)">
								<div id="sidebar">

									<!-- Sidebar -->
										<!-- <section>
											<h3>Subheading</h3>
											<p>Phasellus quam turpis, feugiat sit amet ornare in, hendrerit in lectus.
											Praesent semper mod quis eget mi. Etiam eu ante risus. Aliquam erat volutpat.
											Aliquam luctus et mattis lectus sit amet pulvinar. Nam turpis nisi
											consequat etiam.</p>
											<footer>
												<a href="#" class="button icon fa-info-circle">Find out more</a>
											</footer>
										</section> -->

										<section>
											<h3>Sources</h3>
											<ul class="style2">
												<li><a href="#datagouv">DataGouv</a></li>
												<li><a href="#parisdata">Paris Opendata</a></li>
												<li><a href="#csv2xml">Passage du CSV au XML</a></li>
												<li><a href="#xmlpivot">Fichier XML pivot</a></li>
												<li><a href="#stats">Statistiques python</a></li>
												<li><a href="#javascript">Javascript</a></li>
											</ul>
										</section>

								</div>
							</div>
							<div class="8u 12u$(medium) important(medium)">
								<div id="content">

									<!-- Content -->
										<article>

											<h2 id="titre">Test</h2>

											<div id="visu1"></div>

										</article>

								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Footer -->
					<div id="footer-wrapper">
						<footer id="footer" class="container">
							<div class="row">
								<div class="3u 6u(medium) 12u$(small)">

									<!-- Links -->
										<section class="widget links">
											<h3>Chloé Monnin</h3>
											<ul class="style2">
												<li><a href="#">contact mail</a></li>
											</ul>
										</section>

								</div>
								<div class="3u 6u$(medium) 12u$(small)">

									<!-- Links -->
										<section class="widget links">
											<h3>Mathilde Poulain</h3>
											<ul class="style2">
												<li><a href="#">contact mail</a></li>
											</ul>
										</section>

								</div>
								<div class="3u 6u(medium) 12u$(small)">

									<!-- Links -->
										<section class="widget links">
											<h3>Léon-Paul Schaub</h3>
											<ul class="style2">
												<li><a href="#">contact mail</a></li>
											</ul>
										</section>

								</div>
								<div class="3u 6u$(medium) 12u$(small)">

									<!-- Contact -->
										<section class="widget contact last">
											<h3>Notre projet sur Github</h3>
											<ul>
												<li><a ref="https://github.com/StudyInParis/geoapplide"><img src="images/GitHub-Mark-Light-32px.png" alt="lien geoapplide github"/></a></li>
											</ul>
										</section>

								</div>
							</div>
							<div class="row">
								<div class="12u">
									<div id="copyright">
										<ul class="menu">
											<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
										</ul>
									</div>
								</div>
							</div>
						</footer>
					</div>

				</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
			<script>
			$("#titre").append(", de jquery !");

			$.ajax({
			  url: "https://raw.githubusercontent.com/StudyInParis/geoapplide/master/xml_formattes_pivot/xml_pivot.xml",
			  cache: true
			})
			  .done(function( html ) {
			    $("#source").val( html ) ;
			  });

			    var xml=$("#source").val(),
			    xmlDoc = $.parseXML( xml ),
			    $xml = $( xmlDoc );

			// crée un tableau avec tous les types
			var types = new Object() ;
			$(xml).find('arrondissement').each(function(){
				var arro = $(this).attr("num") ;
				$(this).find('element').each( function(){
					var type = $(this).attr("type") ;
			    types[type] = type;
				});
			});
			console.log(types);

			// créé un tableau avec tous les arrondissements
			var arrs = new Array();
			var i =0;
			$(xml).find('arrondissement').each(function(){
			  var arro = $(this).attr("num") ;
			  arrs[i] = arro;
			  i++;
			  });
			console.log(arrs);

			// création des boites arrondissements et des boîtes elements avec nom et adresse
			$.each( arrs, function( key, value ) {
			  $("#visu1").append('<div id="'+value+'" style="border:1px solid #808080"><h3>'+value+'</h3></div>');
			  var temp = value ;
			  $.each(types, function(key, value) {
			    $("#"+temp).append('<div class="arro" id="titre-'+temp + value+'" style="clear:both">'+value+'</div>');
			    $("#"+temp).append('<div class="content-arro" id="'+ temp + value+'"></div>');
			  });
			});

			// ajout des éléments du xml dans chaque boite arrondissement qui lui correspond
			$(xml).find('arrondissement').each(function(){
				var arro = $(this).attr("num") ;
				$(this).find('element').each( function(){
					var id = $(this).attr('id') ;
					var nom = $(this).find('nom').text() ;
					var adr = $(this).find("adresse").text() ;
					var type = $(this).attr("type") ;
			    $("#"+arro+type).append('<div class="element '+type+'" id="'+id+'" style="margin:5px; border:1px dashed #cacaca; width:200px; float:left; height:75px; padding:5px">'+nom+'<div class="adresse" id="'+id+'-adresse">'+adr+'</div></div>')
				});
			});

			// coloration des boîtes lorsque la souris est dessus
			$( "div.element" )
			  .mouseover(function() {
			    $( this ).css("background-color","#FEC606");
			    $( "#"+$(this).attr("id")+"-adresse" ).show();
			  })
			  .mouseout(function() {
			    $( this ).css("background-color","#FFF");
			    $( "#"+$(this).attr("id")+"-adresse" ).hide();
			    $(".cinema").css("background-color","#D4DBC8") ;
			    $(".marche").css("background-color","#BD8D46") ;
			    $(".cafe").css("background-color","#B0CC99") ;
			    $(".bibli").css("background-color","#C4D7ED") ;
			    $(".preservatifs").css("background-color","#9E8479") ;
			    $(".bar").css("background-color","#EACFB8") ;
			    $(".crous").css("background-color","#FFD940") ;
			  });

			// cache des adresses
			$(".adresse").hide();

			// application de styles pour chaque boîte
			$(".cinema").css("background-color","#E6E2AF") ;
			$(".marche").css("background-color","#BD8D46") ;
			$(".cafe").css("background-color","#B0CC99") ;
			$(".bibli").css("background-color","#C4D7ED") ;
			$(".preservatifs").css("background-color","#9E8479") ;
			$(".bar").css("background-color","#EACFB8") ;
			$(".crous").css("background-color","#FFD940") ;


			</script>


	</body>
</html>
